{% extends 'user/base.html' %}
{% block content %}
    <div class="container-fluid">
{#        <div class="billboard-header">#}
{#            <div class="row">#}
{#                <div class="col-sm-3">#}
{#                    <div class="input-group"> <span class="input-group-btn">#}
{#        <button class="btn btn-default" type="button">搜索</button>#}
{#      </span>#}
{#                        <input type="text" class="form-control" placeholder="Search for...">#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
        <div class="billboard-content">
            <div class="row">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <tr>
                            <th>序号</th>
                            <th>标题</th>
                            <th>内容</th>
                            <th>发布者</th>
                            <th>发布时间</th>
                            <th></th>
                        </tr> {% for bb,s in bbs %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ bb.title }}</td>
                            <td>
                                <div class="b-content">{{ bb.content }}</div>
                            </td>
                            <td>{{ s }}</td>
                            <td>{{ bb.publish_time|date:"Y-m-d D" }}</td>
                            <td>
                                <button type="button" class="btn btn-link btn-detail">详细信息</button>
                            </td>
                        </tr> {% endfor %} </table>
                </div>
            </div>
        </div>
    </div>
    <div class="blur-block"></div>
    <div class="detail">
    <div class="btn-close">
        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
        <div class="container-fluid">
            <div class="row">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label">标题：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control readonly" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputPassword" class="col-sm-2
                    control-label">内容：</label>
                    <div class="col-sm-10">
                        <textarea class="form-control readonly" rows="4" readonly></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputPassword" class="col-sm-2
                    control-label">发布者：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control readonly" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputPassword" class="col-sm-2
                    control-label">发布日期</label>
                    <div class="col-sm-4">
                        <input class="form-control readonly" type="text" readonly>
                    </div>
                </div>
            </form>
                </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script>
        $(document).ready(function () {
            $('.blur-block').hide();
            $('.detail').hide();
            $('.blur-block').css('height', $(window).height()).css('width', $(window).width())
            $(window).resize(function () {
                $('.b-content').width($(window).width() * 0.30);
                $('.blur-block').css('height', $(window).height()).css('width', $(window).width())
            });
            $('.btn-detail').click(function (e) {
                button_element = $(e.target);
                tds = button_element.parent().siblings();
                inputs = $('.form-horizontal').find('.readonly');
                console.log(tds);
                for(var i = 0; i < tds.length-1; i++) {
                    $(inputs[i]).val($(tds[i+1]).text());
                }
                $('.blur-block').show();
                $('.detail').show();
            })
            $('.btn-close').click(function (e) {
                $('.blur-block').hide();
                $('.detail').hide();
            })
        })
    </script>
{% endblock %}